<!DOCTYPE html>
<html>
<head>
<title>TaaS Factory Portal</title>
<style>
body{
font-family:Arial;
background:#0f172a;
color:white;
display:flex;
justify-content:center;
align-items:center;
height:100vh;
margin:0;
}
.card{
background:#1e293b;
padding:30px;
border-radius:15px;
width:380px;
box-shadow:0 0 25px #000;
}
input,button{
width:100%;
padding:12px;
margin-top:10px;
border-radius:8px;
border:none;
}
button{
background:#22c55e;
color:white;
font-weight:bold;
cursor:pointer;
}
button:hover{background:#16a34a}
.log{
background:black;
padding:10px;
margin-top:15px;
height:120px;
overflow:auto;
font-size:12px;
}
</style>
</head>
<body>

<div class="card">
<h2>üè≠ Factory Portal</h2>

<input id="wallet" placeholder="Factory Wallet">

<button onclick="login()">Login</button>

<hr>

<input id="brand" placeholder="Brand">
<input id="model" placeholder="Model">
<input id="category" placeholder="Category">

<button onclick="mint()">Mint Product</button>

<div class="log" id="log"></div>
</div>

<script>
let token=""

function log(msg){
document.getElementById("log").innerHTML+=msg+"<br>"
}

async function login(){
const wallet=document.getElementById("wallet").value

log("Logging in...")

const res=await fetch("/api/login",{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({wallet})
})

const data=await res.json()

if(!data.success){
log("‚ùå Login failed")
return
}

token=data.token
log("‚úÖ Logged in")
}

async function mint(){
if(!token){
log("Login first")
return
}

const brand=document.getElementById("brand").value
const model=document.getElementById("model").value
const category=document.getElementById("category").value

log("Minting product...")

const res=await fetch("/api/create",{
method:"POST",
headers:{
"Content-Type":"application/json",
Authorization:"Bearer "+token
},
body:JSON.stringify({brand,model,category})
})

const data=await res.json()

if(!data.success){
log("‚ùå "+JSON.stringify(data))
return
}

log("‚úÖ Product Minted")
log("ID: "+data.id)
log(`<a href="${data.qr}" target="_blank">Open QR</a>`)
}
</script>

</body>
</html>